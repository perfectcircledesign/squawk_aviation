/*!
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
!function(t){t.fn.jcarousel=function(i){if("string"==typeof i){var n=t(this).data("jcarousel"),o=Array.prototype.slice.call(arguments,1);return n[i].apply(n,o)}return this.each(function(){t(this).data("jcarousel",new s(this,i))})};var i={vertical:!1,listTag:"ul",itemTag:"li",start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null};t.jcarousel=function(s,n){this.options=t.extend({},i,n||{}),this.locked=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":"left";for(var o="",l=s.className.split(" "),e=0;e<l.length;e++)if(l[e].indexOf("jcarousel-skin")!=-1){t(s).removeClass(l[e]),o=l[e];break}s.nodeName.toUpperCase()==this.options.listTag.toUpperCase()?(this.list=t(s),this.container=this.list.parent(),this.container.hasClass("jcarousel-clip")?(this.container.parent().hasClass("jcarousel-container")||(this.container=this.container.wrap("<div></div>")),this.container=this.container.parent()):this.container.hasClass("jcarousel-container")||(this.container=this.list.wrap("<div></div>").parent())):(this.container=t(s),this.list=this.container.find(this.options.listTag).eq(0)),""!=o&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+o+'"></div>'),this.clip=this.list.parent(),this.clip.length&&this.clip.hasClass("jcarousel-clip")||(this.clip=this.list.wrap("<div></div>").parent()),this.buttonNext=t(".jcarousel-next",this.container),0==this.buttonNext.size()&&null!=this.options.buttonNextHTML&&(this.buttonNext=this.clip.after(this.options.buttonNextHTML).next()),this.buttonNext.addClass(this.className("jcarousel-next")),this.buttonPrev=t(".jcarousel-prev",this.container),0==this.buttonPrev.size()&&null!=this.options.buttonPrevHTML&&(this.buttonPrev=this.clip.before(this.options.buttonPrevHTML).prev()),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.clip.addClass(this.className("jcarousel-clip")).css({overflow:"hidden",position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,left:0,margin:0,padding:0}),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});var a=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,h=this.list.children(this.options.itemTag),r=this;if(h.size()>0){var c=0,e=this.options.offset;h.each(function(){r.format(this,e++),c+=r.dimension(this,a)}),this.list.css(this.wh,c+"px"),n&&void 0!==n.size||(this.options.size=h.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){r.next()},this.funcPrev=function(){r.prev()},this.funcResize=function(){r.reload()},null!=this.options.initCallback&&this.options.initCallback(this,"init"),t.browser.safari?(this.buttons(!1,!1),t(window).bind("load.jcarousel",function(){r.setup()})):this.setup()};var s=t.jcarousel;s.fn=s.prototype={jcarousel:"0.2.4"},s.fn.extend=s.extend=t.extend,s.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var i=this.pos(this.options.start);this.prevFirst=this.prevLast=null,this.animate(i,!1),t(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!=this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!=this.tail&&this.inTail&&this.list.css(this.lt,s.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!=this.options.reloadCallback&&this.options.reloadCallback(this),null!=this.options.visible){var i=this,n=Math.ceil(this.clipping()/this.options.visible),o=0,l=0;t(this.options.itemTag,this.list).each(function(t){o+=i.dimension(this,n),t+1<i.first&&(l=o)}),this.list.css(this.wh,o+"px"),this.list.css(this.lt,-l+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(t){return void 0!=t&&(this.options.size=t,this.locked||this.buttons()),this.options.size},has:function(t,i){void 0!=i&&i||(i=t),null!==this.options.size&&i>this.options.size&&(i=this.options.size);for(var s=t;s<=i;s++){var n=this.get(s);if(!n.length||n.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(i){return t(".jcarousel-item-"+i,this.list)},add:function(t,i){var n=this.get(t),o=0;if(0==n.length){for(var l,n=this.create(t),e=s.intval(t);l=this.get(--e);)if(e<=0||l.length){e<=0?this.list.prepend(n):l.after(n);break}}else o=this.dimension(n);n.removeClass(this.className("jcarousel-item-placeholder")),"string"==typeof i?n.html(i):n.empty().append(i);var a=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,h=this.dimension(n,a)-o;return t>0&&t<this.first&&this.list.css(this.lt,s.intval(this.list.css(this.lt))-h+"px"),this.list.css(this.wh,s.intval(this.list.css(this.wh))+h+"px"),n},remove:function(t){var i=this.get(t);if(i.length&&!(t>=this.first&&t<=this.last)){var n=this.dimension(i);t<this.first&&this.list.css(this.lt,s.intval(this.list.css(this.lt))+n+"px"),i.remove(),this.list.css(this.wh,s.intval(this.list.css(this.wh))-n+"px")}},next:function(){this.stopAuto(),null==this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){this.stopAuto(),null!=this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(t){if(!this.locked&&!this.animating&&this.tail){var i=s.intval(this.list.css(this.lt));t?i+=this.tail:i-=this.tail,this.inTail=!t,this.prevFirst=this.first,this.prevLast=this.last,this.animate(i)}},scroll:function(t,i){this.locked||this.animating||this.animate(this.pos(t),i)},pos:function(i){var n=s.intval(this.list.css(this.lt));if(this.locked||this.animating)return n;"circular"!=this.options.wrap&&(i=i<1?1:this.options.size&&i>this.options.size?this.options.size:i);for(var o,l=this.first>i,e="circular"!=this.options.wrap&&this.first<=1?1:this.first,a=l?this.get(e):this.get(this.last),h=l?e:e-1,r=null,c=0,u=!1,p=0;l?--h>=i:++h<i;)r=this.get(h),u=!r.length,0==r.length&&(r=this.create(h).addClass(this.className("jcarousel-item-placeholder")),a[l?"before":"after"](r),null!=this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(h<=0||h>this.options.size)&&(o=this.get(this.index(h)),o.length&&this.add(h,o.children().clone(!0)))),a=r,p=this.dimension(r),u&&(c+=p),null!=this.first&&("circular"==this.options.wrap||h>=1&&(null==this.options.size||h<=this.options.size))&&(n=l?n+p:n-p);for(var f=this.clipping(),v=[],d=0,h=i,b=0,a=this.get(i-1);++d;){r=this.get(h),u=!r.length,0==r.length&&(r=this.create(h).addClass(this.className("jcarousel-item-placeholder")),0==a.length?this.list.prepend(r):a[l?"before":"after"](r),null!=this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(h<=0||h>this.options.size)&&(o=this.get(this.index(h)),o.length&&this.add(h,o.find(">*").clone(!0)))),a=r;var p=this.dimension(r);if(0==p)return console&&t.isFunction(console.log)&&console.log("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting..."),0;if("circular"!=this.options.wrap&&null!==this.options.size&&h>this.options.size?v.push(r):u&&(c+=p),b+=p,b>=f)break;h++}for(var m=0;m<v.length;m++)v[m].remove();c>0&&(this.list.css(this.wh,this.dimension(this.list)+c+"px"),l&&(n-=c,this.list.css(this.lt,s.intval(this.list.css(this.lt))-c+"px")));var g=i+d-1;if("circular"!=this.options.wrap&&this.options.size&&g>this.options.size&&(g=this.options.size),h>g)for(d=0,h=g,b=0;++d;){var r=this.get(h--);if(!r.length)break;if(b+=this.dimension(r),b>=f)break}var k=g-d+1;if("circular"!=this.options.wrap&&k<1&&(k=1),this.inTail&&l&&(n+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&g==this.options.size&&g-d+1>=1){var x=s.margin(this.get(g),this.options.vertical?"marginBottom":"marginRight");b-x>f&&(this.tail=b-f-x)}for(;i-- >k;)n+=this.dimension(this.get(i));return this.prevFirst=this.first,this.prevLast=this.last,this.first=k,this.last=g,n},animate:function(t,i){if(!this.locked&&!this.animating){this.animating=!0;var s=this,n=function(){s.animating=!1,0==t&&s.list.css(s.lt,0),("circular"==s.options.wrap||"both"==s.options.wrap||"last"==s.options.wrap||null==s.options.size||s.last<s.options.size)&&s.startAuto(),s.buttons(),s.notify("onAfterAnimation")};if(this.notify("onBeforeAnimation"),this.options.animation&&0!=i){var o=this.options.vertical?{top:t}:{left:t};this.list.animate(o,this.options.animation,this.options.easing,n)}else this.list.css(this.lt,t+"px"),n()}},startAuto:function(t){if(void 0!=t&&(this.options.auto=t),0==this.options.auto)return this.stopAuto();if(null==this.timer){var i=this;this.timer=setTimeout(function(){i.next()},1e3*this.options.auto)}},stopAuto:function(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null)},buttons:function(t,i){if(void 0==t||null==t){var t=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||this.last<this.options.size);this.locked||this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||!(this.last>=this.options.size)||(t=null!=this.tail&&!this.inTail)}if(void 0==i||null==i){var i=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1);this.locked||this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||1!=this.first||(i=null!=this.tail&&this.inTail)}var s=this;this.buttonNext[t?"bind":"unbind"](this.options.buttonNextEvent+".jcarousel",this.funcNext)[t?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",!t),this.buttonPrev[i?"bind":"unbind"](this.options.buttonPrevEvent+".jcarousel",this.funcPrev)[i?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",!i),this.buttonNext.length>0&&(void 0==this.buttonNext[0].jcarouselstate||this.buttonNext[0].jcarouselstate!=t)&&null!=this.options.buttonNextCallback&&(this.buttonNext.each(function(){s.options.buttonNextCallback(s,this,t)}),this.buttonNext[0].jcarouselstate=t),this.buttonPrev.length>0&&(void 0==this.buttonPrev[0].jcarouselstate||this.buttonPrev[0].jcarouselstate!=i)&&null!=this.options.buttonPrevCallback&&(this.buttonPrev.each(function(){s.options.buttonPrevCallback(s,this,i)}),this.buttonPrev[0].jcarouselstate=i)},notify:function(t){var i=null==this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",t,i),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",t,i,this.first),this.callback("itemFirstOutCallback",t,i,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",t,i,this.last),this.callback("itemLastOutCallback",t,i,this.prevLast)),this.callback("itemVisibleInCallback",t,i,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",t,i,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(i,s,n,o,l,e,a){if(void 0!=this.options[i]&&("object"==typeof this.options[i]||"onAfterAnimation"==s)){var h="object"==typeof this.options[i]?this.options[i][s]:this.options[i];if(t.isFunction(h)){var r=this;if(void 0===o)h(r,n,s);else if(void 0===l)this.get(o).each(function(){h(r,this,o,n,s)});else for(var c=o;c<=l;c++)null===c||c>=e&&c<=a||this.get(c).each(function(){h(r,this,c,n,s)})}}},create:function(t){return this.format("<"+this.options.itemTag+"></"+this.options.itemTag+">",t)},format:function(i,s){var n=t(i).addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+s)).css({"float":"left","list-style":"none"});return n.attr("jcarouselindex",s),n},className:function(t){return t+" "+t+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(i,n){var o=void 0!=i.jquery?i[0]:i,l=this.options.vertical?o.offsetHeight+s.margin(o,"marginTop")+s.margin(o,"marginBottom"):o.offsetWidth+s.margin(o,"marginLeft")+s.margin(o,"marginRight");if(void 0==n||l==n)return l;var e=this.options.vertical?n-s.margin(o,"marginTop")-s.margin(o,"marginBottom"):n-s.margin(o,"marginLeft")-s.margin(o,"marginRight");return t(o).css(this.wh,e+"px"),this.dimension(o)},clipping:function(){if(null!=this.clip[0])return this.options.vertical?this.clip[0].offsetHeight-s.intval(this.clip.css("borderTopWidth"))-s.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-s.intval(this.clip.css("borderLeftWidth"))-s.intval(this.clip.css("borderRightWidth"))},index:function(t,i){return void 0==i&&(i=this.options.size),Math.round(((t-1)/i-Math.floor((t-1)/i))*i)+1}}),s.extend({defaults:function(s){return t.extend(i,s||{})},margin:function(i,n){if(!i)return 0;var o=void 0!=i.jquery?i[0]:i;if("marginRight"==n&&t.browser.safari){var l,e,a={display:"block","float":"none",width:"auto"};return t.swap(o,a,function(){l=o.offsetWidth}),a.marginRight=0,t.swap(o,a,function(){e=o.offsetWidth}),e-l}return s.intval(t.css(o,n))},intval:function(t){return t=parseInt(t),isNaN(t)?0:t}})}(jQuery);